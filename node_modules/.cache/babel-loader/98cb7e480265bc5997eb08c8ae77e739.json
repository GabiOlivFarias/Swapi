{"remainingRequest":"/home/gabi/JERA/jera-academy-girls-desafio-2-front/node_modules/babel-loader/lib/index.js!/home/gabi/JERA/jera-academy-girls-desafio-2-front/node_modules/vuetify/lib/components/VCalendar/modes/stack.js","dependencies":[{"path":"/home/gabi/JERA/jera-academy-girls-desafio-2-front/node_modules/vuetify/lib/components/VCalendar/modes/stack.js","mtime":499162500000},{"path":"/home/gabi/JERA/jera-academy-girls-desafio-2-front/babel.config.js","mtime":1661951552984},{"path":"/home/gabi/JERA/jera-academy-girls-desafio-2-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/gabi/JERA/jera-academy-girls-desafio-2-front/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL2dhYmkvSkVSQS9qZXJhLWFjYWRlbXktZ2lybHMtZGVzYWZpby0yLWZyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5LmpzIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2dhYmkvSkVSQS9qZXJhLWFjYWRlbXktZ2lybHMtZGVzYWZpby0yLWZyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgeyBnZXRPdmVybGFwR3JvdXBIYW5kbGVyLCBnZXRWaXN1YWxzLCBoYXNPdmVybGFwLCBnZXROb3JtYWxpemVkUmFuZ2UgfSBmcm9tICcuL2NvbW1vbic7CmltcG9ydCB7IGdldFRpbWVzdGFtcElkZW50aWZpZXIgfSBmcm9tICcuLi91dGlsL3RpbWVzdGFtcCc7CnZhciBGVUxMX1dJRFRIID0gMTAwOwp2YXIgREVGQVVMVF9PRkZTRVQgPSA1Owp2YXIgV0lEVEhfTVVMVElQTElFUiA9IDEuNzsKLyoqCiAqIFZhcmlhdGlvbiBvZiBjb2x1bW4gbW9kZSB3aGVyZSBldmVudHMgY2FuIGJlIHN0YWNrZWQuIFRoZSBwcmlvcml0eSBvZiB0aGlzCiAqIG1vZGUgaXMgdG8gc3RhY2sgZXZlbnRzIHRvZ2V0aGVyIHRha2luZyB1cCB0aGUgbGVhc3QgYW1vdW50IG9mIHNwYWNlIHdoaWxlCiAqIHRyeWluZyB0byBlbnN1cmUgdGhlIGNvbnRlbnQgb2YgdGhlIGV2ZW50IGlzIGFsd2F5cyB2aXNpYmxlIGFzIHdlbGwgYXMgaXRzCiAqIHN0YXJ0IGFuZCBlbmQuIEEgc2libGluZyBjb2x1bW4gaGFzIGludGVyc2VjdGluZyBldmVudCBjb250ZW50IGFuZCBtdXN0IGJlCiAqIHBsYWNlZCBiZXNpZGUgZWFjaCBvdGhlci4gTm9uLXNpYmxpbmcgY29sdW1ucyBhcmUgb2Zmc2V0IGJ5IDUlIGZyb20gdGhlCiAqIHByZXZpb3VzIGNvbHVtbi4gVGhlIHdpZHRoIGlzIHNjYWxlZCBieSAxLjcgc28gdGhlIGV2ZW50cyBvdmVybGFwIGFuZAogKiB3aGl0ZXNwYWNlIGlzIHJlZHVjZWQuIElmIHRoZXJlIGlzIGEgaG9sZSBpbiBjb2x1bW5zIHRoZSBldmVudCB3aWR0aCBpcwogKiBzY2FsZWQgdXAgc28gaXQgaW50ZXJzZWN0cyB3aXRoIHRoZSBuZXh0IGNvbHVtbi4gVGhlIGNvbHVtbnMgaGF2ZSBlcXVhbAogKiB3aWR0aCBpbiB0aGUgc3BhY2UgdGhleSBhcmUgZ2l2ZW4uIElmIHRoZSBldmVudCBkb2Vzbid0IGhhdmUgYW55IHRvIHRoZQogKiByaWdodCBvZiBpdCB0aGF0IGludGVyc2VjdCB3aXRoIGl0J3MgY29udGVudCBpdCdzIHJpZ2h0IHNpZGUgaXMgZXh0ZW5kZWQKICogdG8gdGhlIHJpZ2h0IHNpZGUuCiAqLwoKZXhwb3J0IHZhciBzdGFjayA9IGZ1bmN0aW9uIHN0YWNrKGV2ZW50cywgZmlyc3RXZWVrZGF5LCBvdmVybGFwVGhyZXNob2xkKSB7CiAgdmFyIGhhbmRsZXIgPSBnZXRPdmVybGFwR3JvdXBIYW5kbGVyKGZpcnN0V2Vla2RheSk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtc3RhdGVtZW50cwoKICByZXR1cm4gZnVuY3Rpb24gKGRheSwgZGF5RXZlbnRzLCB0aW1lZCwgcmVzZXQpIHsKICAgIGlmICghdGltZWQpIHsKICAgICAgcmV0dXJuIGhhbmRsZXIuZ2V0VmlzdWFscyhkYXksIGRheUV2ZW50cywgdGltZWQsIHJlc2V0KTsKICAgIH0KCiAgICB2YXIgZGF5U3RhcnQgPSBnZXRUaW1lc3RhbXBJZGVudGlmaWVyKGRheSk7CiAgICB2YXIgdmlzdWFscyA9IGdldFZpc3VhbHMoZGF5RXZlbnRzLCBkYXlTdGFydCk7CiAgICB2YXIgZ3JvdXBzID0gZ2V0R3JvdXBzKHZpc3VhbHMsIGRheVN0YXJ0KTsKCiAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZ3JvdXBzKSwKICAgICAgICBfc3RlcDsKCiAgICB0cnkgewogICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgIHZhciBncm91cCA9IF9zdGVwLnZhbHVlOwogICAgICAgIHZhciBub2RlcyA9IFtdOwoKICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGdyb3VwLnZpc3VhbHMpLAogICAgICAgICAgICBfc3RlcDI7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgdmlzdWFsID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgICB2YXIgY2hpbGQgPSBnZXROb2RlKHZpc3VhbCwgZGF5U3RhcnQpOwogICAgICAgICAgICB2YXIgaW5kZXggPSBnZXROZXh0SW5kZXgoY2hpbGQsIG5vZGVzKTsKCiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGNoaWxkLCBub2Rlcyk7CgogICAgICAgICAgICAgIGlmIChwYXJlbnQpIHsKICAgICAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IHBhcmVudDsKICAgICAgICAgICAgICAgIGNoaWxkLnNpYmxpbmcgPSBoYXNPdmVybGFwKGNoaWxkLnN0YXJ0LCBjaGlsZC5lbmQsIHBhcmVudC5zdGFydCwgYWRkVGltZShwYXJlbnQuc3RhcnQsIG92ZXJsYXBUaHJlc2hvbGQpKTsKICAgICAgICAgICAgICAgIGNoaWxkLmluZGV4ID0gcGFyZW50LmluZGV4ICsgMTsKICAgICAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKGNoaWxkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFyIF9nZXRPdmVybGFwcGluZ1JhbmdlID0gZ2V0T3ZlcmxhcHBpbmdSYW5nZShjaGlsZCwgbm9kZXMsIGluZGV4IC0gMSwgaW5kZXggLSAxKSwKICAgICAgICAgICAgICAgICAgX2dldE92ZXJsYXBwaW5nUmFuZ2UyID0gX3NsaWNlZFRvQXJyYXkoX2dldE92ZXJsYXBwaW5nUmFuZ2UsIDEpLAogICAgICAgICAgICAgICAgICBfcGFyZW50ID0gX2dldE92ZXJsYXBwaW5nUmFuZ2UyWzBdOwoKICAgICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSBnZXRPdmVybGFwcGluZ1JhbmdlKGNoaWxkLCBub2RlcywgaW5kZXggKyAxLCBpbmRleCArIG5vZGVzLmxlbmd0aCwgdHJ1ZSk7CiAgICAgICAgICAgICAgY2hpbGQuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgICAgICAgICAgICBjaGlsZC5pbmRleCA9IGluZGV4OwoKICAgICAgICAgICAgICBpZiAoX3BhcmVudCkgewogICAgICAgICAgICAgICAgY2hpbGQucGFyZW50ID0gX3BhcmVudDsKICAgICAgICAgICAgICAgIGNoaWxkLnNpYmxpbmcgPSBoYXNPdmVybGFwKGNoaWxkLnN0YXJ0LCBjaGlsZC5lbmQsIF9wYXJlbnQuc3RhcnQsIGFkZFRpbWUoX3BhcmVudC5zdGFydCwgb3ZlcmxhcFRocmVzaG9sZCkpOwoKICAgICAgICAgICAgICAgIF9wYXJlbnQuY2hpbGRyZW4ucHVzaChjaGlsZCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGNoaWxkcmVuKSwKICAgICAgICAgICAgICAgICAgX3N0ZXAzOwoKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgICAgdmFyIGdyYW5kID0gX3N0ZXAzLnZhbHVlOwoKICAgICAgICAgICAgICAgICAgaWYgKGdyYW5kLnBhcmVudCA9PT0gX3BhcmVudCkgewogICAgICAgICAgICAgICAgICAgIGdyYW5kLnBhcmVudCA9IGNoaWxkOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB2YXIgZ3JhbmROZXh0ID0gZ3JhbmQuaW5kZXggLSBjaGlsZC5pbmRleCA8PSAxOwoKICAgICAgICAgICAgICAgICAgaWYgKGdyYW5kTmV4dCAmJiBjaGlsZC5zaWJsaW5nICYmIGhhc092ZXJsYXAoY2hpbGQuc3RhcnQsIGFkZFRpbWUoY2hpbGQuc3RhcnQsIG92ZXJsYXBUaHJlc2hvbGQpLCBncmFuZC5zdGFydCwgZ3JhbmQuZW5kKSkgewogICAgICAgICAgICAgICAgICAgIGdyYW5kLnNpYmxpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5mKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBub2Rlcy5wdXNoKGNoaWxkKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgICB9CgogICAgICAgIGNhbGN1bGF0ZUJvdW5kcyhub2Rlcywgb3ZlcmxhcFRocmVzaG9sZCk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgIH0KCiAgICB2aXN1YWxzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgcmV0dXJuIGEubGVmdCAtIGIubGVmdCB8fCBhLmV2ZW50LnN0YXJ0VGltZXN0YW1wSWRlbnRpZmllciAtIGIuZXZlbnQuc3RhcnRUaW1lc3RhbXBJZGVudGlmaWVyOwogICAgfSk7CiAgICByZXR1cm4gdmlzdWFsczsKICB9Owp9OwoKZnVuY3Rpb24gY2FsY3VsYXRlQm91bmRzKG5vZGVzLCBvdmVybGFwVGhyZXNob2xkKSB7CiAgdmFyIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihub2RlcyksCiAgICAgIF9zdGVwNDsKCiAgdHJ5IHsKICAgIGZvciAoX2l0ZXJhdG9yNC5zKCk7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uKCkpLmRvbmU7KSB7CiAgICAgIHZhciBub2RlID0gX3N0ZXA0LnZhbHVlOwogICAgICB2YXIgdmlzdWFsID0gbm9kZS52aXN1YWwsCiAgICAgICAgICBwYXJlbnQgPSBub2RlLnBhcmVudDsKICAgICAgdmFyIGNvbHVtbnMgPSBnZXRNYXhDaGlsZEluZGV4KG5vZGUpICsgMTsKICAgICAgdmFyIHNwYWNlTGVmdCA9IHBhcmVudCA/IHBhcmVudC52aXN1YWwubGVmdCA6IDA7CiAgICAgIHZhciBzcGFjZVdpZHRoID0gRlVMTF9XSURUSCAtIHNwYWNlTGVmdDsKICAgICAgdmFyIG9mZnNldCA9IE1hdGgubWluKERFRkFVTFRfT0ZGU0VULCBGVUxMX1dJRFRIIC8gY29sdW1ucyk7CiAgICAgIHZhciBjb2x1bW5XaWR0aE11bHRpcGxpZXIgPSBnZXRDb2x1bW5XaWR0aE11bHRpcGxpZXIobm9kZSwgbm9kZXMpOwogICAgICB2YXIgY29sdW1uT2Zmc2V0ID0gc3BhY2VXaWR0aCAvIChjb2x1bW5zIC0gbm9kZS5pbmRleCArIDEpOwogICAgICB2YXIgY29sdW1uV2lkdGggPSBzcGFjZVdpZHRoIC8gKGNvbHVtbnMgLSBub2RlLmluZGV4ICsgKG5vZGUuc2libGluZyA/IDEgOiAwKSkgKiBjb2x1bW5XaWR0aE11bHRpcGxpZXI7CgogICAgICBpZiAocGFyZW50KSB7CiAgICAgICAgdmlzdWFsLmxlZnQgPSBub2RlLnNpYmxpbmcgPyBzcGFjZUxlZnQgKyBjb2x1bW5PZmZzZXQgOiBzcGFjZUxlZnQgKyBvZmZzZXQ7CiAgICAgIH0KCiAgICAgIHZpc3VhbC53aWR0aCA9IGhhc0Z1bGxXaWR0aChub2RlLCBub2Rlcywgb3ZlcmxhcFRocmVzaG9sZCkgPyBGVUxMX1dJRFRIIC0gdmlzdWFsLmxlZnQgOiBNYXRoLm1pbihGVUxMX1dJRFRIIC0gdmlzdWFsLmxlZnQsIGNvbHVtbldpZHRoICogV0lEVEhfTVVMVElQTElFUik7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfaXRlcmF0b3I0LmUoZXJyKTsKICB9IGZpbmFsbHkgewogICAgX2l0ZXJhdG9yNC5mKCk7CiAgfQp9CgpmdW5jdGlvbiBnZXRDb2x1bW5XaWR0aE11bHRpcGxpZXIobm9kZSwgbm9kZXMpIHsKICBpZiAoIW5vZGUuY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICByZXR1cm4gMTsKICB9CgogIHZhciBtYXhDb2x1bW4gPSBub2RlLmluZGV4ICsgbm9kZXMubGVuZ3RoOwogIHZhciBtaW5Db2x1bW4gPSBub2RlLmNoaWxkcmVuLnJlZHVjZShmdW5jdGlvbiAobWluLCBjKSB7CiAgICByZXR1cm4gTWF0aC5taW4obWluLCBjLmluZGV4KTsKICB9LCBtYXhDb2x1bW4pOwogIHJldHVybiBtaW5Db2x1bW4gLSBub2RlLmluZGV4Owp9CgpmdW5jdGlvbiBnZXRPdmVybGFwcGluZ0luZGljZXMobm9kZSwgbm9kZXMpIHsKICB2YXIgaW5kaWNlcyA9IFtdOwoKICB2YXIgX2l0ZXJhdG9yNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5vZGVzKSwKICAgICAgX3N0ZXA1OwoKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3I1LnMoKTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1Lm4oKSkuZG9uZTspIHsKICAgICAgdmFyIG90aGVyID0gX3N0ZXA1LnZhbHVlOwoKICAgICAgaWYgKGhhc092ZXJsYXAobm9kZS5zdGFydCwgbm9kZS5lbmQsIG90aGVyLnN0YXJ0LCBvdGhlci5lbmQpKSB7CiAgICAgICAgaW5kaWNlcy5wdXNoKG90aGVyLmluZGV4KTsKICAgICAgfQogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yNS5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvcjUuZigpOwogIH0KCiAgcmV0dXJuIGluZGljZXM7Cn0KCmZ1bmN0aW9uIGdldE5leHRJbmRleChub2RlLCBub2RlcykgewogIHZhciBpbmRpY2VzID0gZ2V0T3ZlcmxhcHBpbmdJbmRpY2VzKG5vZGUsIG5vZGVzKTsKICBpbmRpY2VzLnNvcnQoKTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRpY2VzLmxlbmd0aDsgaSsrKSB7CiAgICBpZiAoaSA8IGluZGljZXNbaV0pIHsKICAgICAgcmV0dXJuIGk7CiAgICB9CiAgfQoKICByZXR1cm4gZmFsc2U7Cn0KCmZ1bmN0aW9uIGdldE92ZXJsYXBwaW5nUmFuZ2Uobm9kZSwgbm9kZXMsIGluZGV4TWluLCBpbmRleE1heCkgewogIHZhciByZXR1cm5GaXJzdENvbHVtbiA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogZmFsc2U7CiAgdmFyIG92ZXJsYXBwaW5nID0gW107CgogIHZhciBfaXRlcmF0b3I2ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobm9kZXMpLAogICAgICBfc3RlcDY7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvcjYucygpOyAhKF9zdGVwNiA9IF9pdGVyYXRvcjYubigpKS5kb25lOykgewogICAgICB2YXIgb3RoZXIgPSBfc3RlcDYudmFsdWU7CgogICAgICBpZiAob3RoZXIuaW5kZXggPj0gaW5kZXhNaW4gJiYgb3RoZXIuaW5kZXggPD0gaW5kZXhNYXggJiYgaGFzT3ZlcmxhcChub2RlLnN0YXJ0LCBub2RlLmVuZCwgb3RoZXIuc3RhcnQsIG90aGVyLmVuZCkpIHsKICAgICAgICBvdmVybGFwcGluZy5wdXNoKG90aGVyKTsKICAgICAgfQogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yNi5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvcjYuZigpOwogIH0KCiAgaWYgKHJldHVybkZpcnN0Q29sdW1uICYmIG92ZXJsYXBwaW5nLmxlbmd0aCA+IDApIHsKICAgIHZhciBmaXJzdCA9IG92ZXJsYXBwaW5nLnJlZHVjZShmdW5jdGlvbiAobWluLCBuKSB7CiAgICAgIHJldHVybiBNYXRoLm1pbihtaW4sIG4uaW5kZXgpOwogICAgfSwgb3ZlcmxhcHBpbmdbMF0uaW5kZXgpOwogICAgcmV0dXJuIG92ZXJsYXBwaW5nLmZpbHRlcihmdW5jdGlvbiAobikgewogICAgICByZXR1cm4gbi5pbmRleCA9PT0gZmlyc3Q7CiAgICB9KTsKICB9CgogIHJldHVybiBvdmVybGFwcGluZzsKfQoKZnVuY3Rpb24gZ2V0UGFyZW50KG5vZGUsIG5vZGVzKSB7CiAgdmFyIHBhcmVudCA9IG51bGw7CgogIHZhciBfaXRlcmF0b3I3ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobm9kZXMpLAogICAgICBfc3RlcDc7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvcjcucygpOyAhKF9zdGVwNyA9IF9pdGVyYXRvcjcubigpKS5kb25lOykgewogICAgICB2YXIgb3RoZXIgPSBfc3RlcDcudmFsdWU7CgogICAgICBpZiAoaGFzT3ZlcmxhcChub2RlLnN0YXJ0LCBub2RlLmVuZCwgb3RoZXIuc3RhcnQsIG90aGVyLmVuZCkgJiYgKHBhcmVudCA9PT0gbnVsbCB8fCBvdGhlci5pbmRleCA+IHBhcmVudC5pbmRleCkpIHsKICAgICAgICBwYXJlbnQgPSBvdGhlcjsKICAgICAgfQogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yNy5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvcjcuZigpOwogIH0KCiAgcmV0dXJuIHBhcmVudDsKfQoKZnVuY3Rpb24gaGFzRnVsbFdpZHRoKG5vZGUsIG5vZGVzLCBvdmVybGFwVGhyZXNob2xkKSB7CiAgdmFyIF9pdGVyYXRvcjggPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihub2RlcyksCiAgICAgIF9zdGVwODsKCiAgdHJ5IHsKICAgIGZvciAoX2l0ZXJhdG9yOC5zKCk7ICEoX3N0ZXA4ID0gX2l0ZXJhdG9yOC5uKCkpLmRvbmU7KSB7CiAgICAgIHZhciBvdGhlciA9IF9zdGVwOC52YWx1ZTsKCiAgICAgIGlmIChvdGhlciAhPT0gbm9kZSAmJiBvdGhlci5pbmRleCA+IG5vZGUuaW5kZXggJiYgaGFzT3ZlcmxhcChub2RlLnN0YXJ0LCBhZGRUaW1lKG5vZGUuc3RhcnQsIG92ZXJsYXBUaHJlc2hvbGQpLCBvdGhlci5zdGFydCwgb3RoZXIuZW5kKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yOC5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvcjguZigpOwogIH0KCiAgcmV0dXJuIHRydWU7Cn0KCmZ1bmN0aW9uIGdldEdyb3Vwcyh2aXN1YWxzLCBkYXlTdGFydCkgewogIHZhciBncm91cHMgPSBbXTsKCiAgdmFyIF9pdGVyYXRvcjkgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih2aXN1YWxzKSwKICAgICAgX3N0ZXA5OwoKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3I5LnMoKTsgIShfc3RlcDkgPSBfaXRlcmF0b3I5Lm4oKSkuZG9uZTspIHsKICAgICAgdmFyIHZpc3VhbCA9IF9zdGVwOS52YWx1ZTsKCiAgICAgIHZhciBfZ2V0Tm9ybWFsaXplZFJhbmdlID0gZ2V0Tm9ybWFsaXplZFJhbmdlKHZpc3VhbC5ldmVudCwgZGF5U3RhcnQpLAogICAgICAgICAgX2dldE5vcm1hbGl6ZWRSYW5nZTIgPSBfc2xpY2VkVG9BcnJheShfZ2V0Tm9ybWFsaXplZFJhbmdlLCAyKSwKICAgICAgICAgIHN0YXJ0ID0gX2dldE5vcm1hbGl6ZWRSYW5nZTJbMF0sCiAgICAgICAgICBlbmQgPSBfZ2V0Tm9ybWFsaXplZFJhbmdlMlsxXTsKCiAgICAgIHZhciBhZGRlZCA9IGZhbHNlOwoKICAgICAgdmFyIF9pdGVyYXRvcjEwID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZ3JvdXBzKSwKICAgICAgICAgIF9zdGVwMTA7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMTAucygpOyAhKF9zdGVwMTAgPSBfaXRlcmF0b3IxMC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZ3JvdXAgPSBfc3RlcDEwLnZhbHVlOwoKICAgICAgICAgIGlmIChoYXNPdmVybGFwKHN0YXJ0LCBlbmQsIGdyb3VwLnN0YXJ0LCBncm91cC5lbmQpKSB7CiAgICAgICAgICAgIGdyb3VwLnZpc3VhbHMucHVzaCh2aXN1YWwpOwogICAgICAgICAgICBncm91cC5lbmQgPSBNYXRoLm1heChncm91cC5lbmQsIGVuZCk7CiAgICAgICAgICAgIGFkZGVkID0gdHJ1ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IxMC5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMTAuZigpOwogICAgICB9CgogICAgICBpZiAoIWFkZGVkKSB7CiAgICAgICAgZ3JvdXBzLnB1c2goewogICAgICAgICAgc3RhcnQ6IHN0YXJ0LAogICAgICAgICAgZW5kOiBlbmQsCiAgICAgICAgICB2aXN1YWxzOiBbdmlzdWFsXQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfaXRlcmF0b3I5LmUoZXJyKTsKICB9IGZpbmFsbHkgewogICAgX2l0ZXJhdG9yOS5mKCk7CiAgfQoKICByZXR1cm4gZ3JvdXBzOwp9CgpmdW5jdGlvbiBnZXROb2RlKHZpc3VhbCwgZGF5U3RhcnQpIHsKICB2YXIgX2dldE5vcm1hbGl6ZWRSYW5nZTMgPSBnZXROb3JtYWxpemVkUmFuZ2UodmlzdWFsLmV2ZW50LCBkYXlTdGFydCksCiAgICAgIF9nZXROb3JtYWxpemVkUmFuZ2U0ID0gX3NsaWNlZFRvQXJyYXkoX2dldE5vcm1hbGl6ZWRSYW5nZTMsIDIpLAogICAgICBzdGFydCA9IF9nZXROb3JtYWxpemVkUmFuZ2U0WzBdLAogICAgICBlbmQgPSBfZ2V0Tm9ybWFsaXplZFJhbmdlNFsxXTsKCiAgcmV0dXJuIHsKICAgIHBhcmVudDogbnVsbCwKICAgIHNpYmxpbmc6IHRydWUsCiAgICBpbmRleDogMCwKICAgIHZpc3VhbDogdmlzdWFsLAogICAgc3RhcnQ6IHN0YXJ0LAogICAgZW5kOiBlbmQsCiAgICBjaGlsZHJlbjogW10KICB9Owp9CgpmdW5jdGlvbiBnZXRNYXhDaGlsZEluZGV4KG5vZGUpIHsKICB2YXIgbWF4ID0gbm9kZS5pbmRleDsKCiAgdmFyIF9pdGVyYXRvcjExID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobm9kZS5jaGlsZHJlbiksCiAgICAgIF9zdGVwMTE7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvcjExLnMoKTsgIShfc3RlcDExID0gX2l0ZXJhdG9yMTEubigpKS5kb25lOykgewogICAgICB2YXIgY2hpbGQgPSBfc3RlcDExLnZhbHVlOwogICAgICB2YXIgY2hpbGRNYXggPSBnZXRNYXhDaGlsZEluZGV4KGNoaWxkKTsKCiAgICAgIGlmIChjaGlsZE1heCA+IG1heCkgewogICAgICAgIG1heCA9IGNoaWxkTWF4OwogICAgICB9CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfaXRlcmF0b3IxMS5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvcjExLmYoKTsKICB9CgogIHJldHVybiBtYXg7Cn0KCmZ1bmN0aW9uIGFkZFRpbWUoaWRlbnRpZmllciwgbWludXRlcykgewogIHZhciByZW1vdmVNaW51dGVzID0gaWRlbnRpZmllciAlIDEwMDsKICB2YXIgdG90YWxNaW51dGVzID0gcmVtb3ZlTWludXRlcyArIG1pbnV0ZXM7CiAgdmFyIGFkZEhvdXJzID0gTWF0aC5mbG9vcih0b3RhbE1pbnV0ZXMgLyA2MCk7CiAgdmFyIGFkZE1pbnV0ZXMgPSB0b3RhbE1pbnV0ZXMgJSA2MDsKICByZXR1cm4gaWRlbnRpZmllciAtIHJlbW92ZU1pbnV0ZXMgKyBhZGRIb3VycyAqIDEwMCArIGFkZE1pbnV0ZXM7Cn0="},{"version":3,"mappings":"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","names":["getOverlapGroupHandler","getVisuals","hasOverlap","getNormalizedRange","getTimestampIdentifier","FULL_WIDTH","DEFAULT_OFFSET","WIDTH_MULTIPLIER","stack","events","firstWeekday","overlapThreshold","handler","day","dayEvents","timed","reset","dayStart","visuals","groups","getGroups","group","nodes","visual","child","getNode","index","getNextIndex","parent","getParent","sibling","start","end","addTime","children","push","getOverlappingRange","length","grand","grandNext","calculateBounds","sort","a","b","left","event","startTimestampIdentifier","node","columns","getMaxChildIndex","spaceLeft","spaceWidth","offset","Math","min","columnWidthMultiplier","getColumnWidthMultiplier","columnOffset","columnWidth","width","hasFullWidth","maxColumn","minColumn","reduce","c","getOverlappingIndices","indices","other","i","indexMin","indexMax","returnFirstColumn","overlapping","first","n","filter","added","max","childMax","identifier","minutes","removeMinutes","totalMinutes","addHours","floor","addMinutes"],"sourceRoot":"","sources":["../../../../src/components/VCalendar/modes/stack.ts"],"sourcesContent":["import { CalendarEventOverlapMode, CalendarEventVisual } from 'vuetify/types'\nimport { getOverlapGroupHandler, getVisuals, hasOverlap, getNormalizedRange } from './common'\nimport { getTimestampIdentifier } from '../util/timestamp'\n\ninterface Group {\n  start: number\n  end: number\n  visuals: CalendarEventVisual[]\n}\n\ninterface Node {\n  parent: Node | null\n  sibling: boolean\n  index: number\n  visual: CalendarEventVisual\n  start: number\n  end: number\n  children: Node[]\n}\n\nconst FULL_WIDTH = 100\n\nconst DEFAULT_OFFSET = 5\n\nconst WIDTH_MULTIPLIER = 1.7\n\n/**\n * Variation of column mode where events can be stacked. The priority of this\n * mode is to stack events together taking up the least amount of space while\n * trying to ensure the content of the event is always visible as well as its\n * start and end. A sibling column has intersecting event content and must be\n * placed beside each other. Non-sibling columns are offset by 5% from the\n * previous column. The width is scaled by 1.7 so the events overlap and\n * whitespace is reduced. If there is a hole in columns the event width is\n * scaled up so it intersects with the next column. The columns have equal\n * width in the space they are given. If the event doesn't have any to the\n * right of it that intersect with it's content it's right side is extended\n * to the right side.\n */\n\nexport const stack: CalendarEventOverlapMode = (events, firstWeekday, overlapThreshold) => {\n  const handler = getOverlapGroupHandler(firstWeekday)\n\n  // eslint-disable-next-line max-statements\n  return (day, dayEvents, timed, reset) => {\n    if (!timed) {\n      return handler.getVisuals(day, dayEvents, timed, reset)\n    }\n\n    const dayStart = getTimestampIdentifier(day)\n    const visuals = getVisuals(dayEvents, dayStart)\n    const groups = getGroups(visuals, dayStart)\n\n    for (const group of groups) {\n      const nodes: Node[] = []\n\n      for (const visual of group.visuals) {\n        const child = getNode(visual, dayStart)\n        const index = getNextIndex(child, nodes)\n\n        if (index === false) {\n          const parent = getParent(child, nodes)\n          if (parent) {\n            child.parent = parent\n            child.sibling = hasOverlap(child.start, child.end, parent.start, addTime(parent.start, overlapThreshold))\n            child.index = parent.index + 1\n            parent.children.push(child)\n          }\n        } else {\n          const [parent] = getOverlappingRange(child, nodes, index - 1, index - 1)\n          const children = getOverlappingRange(child, nodes, index + 1, index + nodes.length, true)\n\n          child.children = children\n          child.index = index\n\n          if (parent) {\n            child.parent = parent\n            child.sibling = hasOverlap(child.start, child.end, parent.start, addTime(parent.start, overlapThreshold))\n            parent.children.push(child)\n          }\n\n          for (const grand of children) {\n            if (grand.parent === parent) {\n              grand.parent = child\n            }\n\n            const grandNext = grand.index - child.index <= 1\n            if (grandNext && child.sibling &&\n              hasOverlap(child.start, addTime(child.start, overlapThreshold), grand.start, grand.end)) {\n              grand.sibling = true\n            }\n          }\n        }\n\n        nodes.push(child)\n      }\n\n      calculateBounds(nodes, overlapThreshold)\n    }\n\n    visuals.sort((a, b) => (a.left - b.left) || (a.event.startTimestampIdentifier - b.event.startTimestampIdentifier))\n\n    return visuals\n  }\n}\n\nfunction calculateBounds (nodes: Node[], overlapThreshold: number) {\n  for (const node of nodes) {\n    const { visual, parent } = node\n    const columns = getMaxChildIndex(node) + 1\n    const spaceLeft = parent ? parent.visual.left : 0\n    const spaceWidth = FULL_WIDTH - spaceLeft\n    const offset = Math.min(DEFAULT_OFFSET, FULL_WIDTH / columns)\n    const columnWidthMultiplier = getColumnWidthMultiplier(node, nodes)\n    const columnOffset = spaceWidth / (columns - node.index + 1)\n    const columnWidth = spaceWidth / (columns - node.index + (node.sibling ? 1 : 0)) * columnWidthMultiplier\n\n    if (parent) {\n      visual.left = node.sibling\n        ? spaceLeft + columnOffset\n        : spaceLeft + offset\n    }\n\n    visual.width = hasFullWidth(node, nodes, overlapThreshold)\n      ? FULL_WIDTH - visual.left\n      : Math.min(FULL_WIDTH - visual.left, columnWidth * WIDTH_MULTIPLIER)\n  }\n}\n\nfunction getColumnWidthMultiplier (node: Node, nodes: Node[]): number {\n  if (!node.children.length) {\n    return 1\n  }\n\n  const maxColumn = node.index + nodes.length\n  const minColumn = node.children.reduce((min, c) => Math.min(min, c.index), maxColumn)\n\n  return minColumn - node.index\n}\n\nfunction getOverlappingIndices (node: Node, nodes: Node[]): number[] {\n  const indices: number[] = []\n  for (const other of nodes) {\n    if (hasOverlap(node.start, node.end, other.start, other.end)) {\n      indices.push(other.index)\n    }\n  }\n  return indices\n}\n\nfunction getNextIndex (node: Node, nodes: Node[]): number | false {\n  const indices = getOverlappingIndices(node, nodes)\n  indices.sort()\n\n  for (let i = 0; i < indices.length; i++) {\n    if (i < indices[i]) {\n      return i\n    }\n  }\n  return false\n}\n\nfunction getOverlappingRange (node: Node, nodes: Node[], indexMin: number, indexMax: number, returnFirstColumn = false): Node[] {\n  const overlapping: Node[] = []\n  for (const other of nodes) {\n    if (other.index >= indexMin && other.index <= indexMax && hasOverlap(node.start, node.end, other.start, other.end)) {\n      overlapping.push(other)\n    }\n  }\n  if (returnFirstColumn && overlapping.length > 0) {\n    const first = overlapping.reduce((min, n) => Math.min(min, n.index), overlapping[0].index)\n    return overlapping.filter(n => n.index === first)\n  }\n  return overlapping\n}\n\nfunction getParent (node: Node, nodes: Node[]): Node | null {\n  let parent: Node | null = null\n  for (const other of nodes) {\n    if (hasOverlap(node.start, node.end, other.start, other.end) && (parent === null || other.index > parent.index)) {\n      parent = other\n    }\n  }\n  return parent\n}\n\nfunction hasFullWidth (node: Node, nodes: Node[], overlapThreshold: number): boolean {\n  for (const other of nodes) {\n    if (other !== node &&\n      other.index > node.index &&\n      hasOverlap(node.start, addTime(node.start, overlapThreshold), other.start, other.end)) {\n      return false\n    }\n  }\n\n  return true\n}\n\nfunction getGroups (visuals: CalendarEventVisual[], dayStart: number): Group[] {\n  const groups: Group[] = []\n\n  for (const visual of visuals) {\n    const [start, end] = getNormalizedRange(visual.event, dayStart)\n    let added = false\n\n    for (const group of groups) {\n      if (hasOverlap(start, end, group.start, group.end)) {\n        group.visuals.push(visual)\n        group.end = Math.max(group.end, end)\n        added = true\n        break\n      }\n    }\n\n    if (!added) {\n      groups.push({ start, end, visuals: [visual] })\n    }\n  }\n\n  return groups\n}\n\nfunction getNode (visual: CalendarEventVisual, dayStart: number): Node {\n  const [start, end] = getNormalizedRange(visual.event, dayStart)\n\n  return {\n    parent: null,\n    sibling: true,\n    index: 0,\n    visual,\n    start,\n    end,\n    children: [],\n  }\n}\n\nfunction getMaxChildIndex (node: Node): number {\n  let max = node.index\n  for (const child of node.children) {\n    const childMax = getMaxChildIndex(child)\n    if (childMax > max) {\n      max = childMax\n    }\n  }\n  return max\n}\n\nfunction addTime (identifier: number, minutes: number): number {\n  const removeMinutes = identifier % 100\n  const totalMinutes = removeMinutes + minutes\n  const addHours = Math.floor(totalMinutes / 60)\n  const addMinutes = totalMinutes % 60\n\n  return identifier - removeMinutes + addHours * 100 + addMinutes\n}\n"]}]}